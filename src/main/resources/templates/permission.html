<script>
    $(function () {
        $('#rsm-table').bootstrapTable({
            url:"http://localhost:8080/rms/getAllrmsData",
            cache: false,
            search: true,
            queryParams:function(params){
                var tmp={
                    fid:0
                }
                return tmp;
            },
            responseHandler:function(res){       //加载服务器数据之前的处理程序，可以用来格式化数据。
                return res.data;
            },
            onExpandRow: expandSubist,
            detailView:true,
            toolbar: '#toolbar',                //工具按钮用哪个容器
            //pagination: true,                   //是否显示分页（*）
            striped:true,
            showColumns: true,                  //是否显示所有的列
            showRefresh: true,                  //是否显示刷新按钮
            uniqueId:"id",
            showToggle:true,
            columns: [{
                field: 'id',
                title: 'id',
                align:"center"
            }, {
                field: 'rmsName',
                title: '名称',
                align: "center"
            }, {
                field: 'rmsIocn',
                title: '图标',
                align: "center"
            }, {
                field: 'rmsUrl',
                title: '拦截路径',
                align: "center"
            }]
        });
        function expandSubist(index, row, $detail) { //注册加载子表的事件。注意下这里的三个参数！
            var current=$detail.html("<table></table>").find("table");
            current.bootstrapTable({
                url:"http://localhost:8080/rms/getAllrmsData",
                detailView:true,
                responseHandler:function(res){       //加载服务器数据之前的处理程序，可以用来格式化数据。
                    return res.data;
                },
                showHeader:false,
                onExpandRow: expandSubist,
                queryParams:function(params){
                    var tmp={
                        fid:row.id
                    }
                    return tmp;
                },
                columns: [{
                    field: 'id',
                    title: 'id',
                    align:"center"
                }, {
                    field: 'rmsName',
                    title: '名称',
                    align: "center"
                }, {
                    field: 'rmsIocn',
                    title: '图标',
                    align: "center"
                }, {
                    field: 'rmsUrl',
                    title: '拦截路径',
                    align: "center"
                }]
            })
            //current.find("tr:first").remove();
        }
    })
</script>
<div class="container-fluid">
<div class="row">
    <div class="col-lg-12 Icell">
        <div id="toolbar" class="btn-group">
            <button id="btn_add" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
            </button>
            <button id="btn_edit" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
            </button>
            <button id="btn_delete" type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
            </button>
        </div>
        <table id="rsm-table"></table>
    </div>
</div>
</div>